%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   Introduction                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}\label{sec:introduction}

A central problem in the study of the solar corona is whether EUV and soft X-ray observations of \AR s imply the plasma is heated steadily or impulsively. Observations of hot plasma by the X-Ray Telescope \citep[XRT,][]{golub_x-ray_2007} on the \textit{Hinode} spacecraft \citep{kosugi_hinode_2007} indicate that \AR{} cores are heated steadily \citep[e.g.][]{warren_constraints_2011,winebarger_using_2011}. Alternatively, observations of cooler ($\sim1$ MK) plasma have been shown to be more consistent with impulsive heating where the plasma is allowed to cool significantly \citep[e.g]{winebarger_evolving_2003,mulu-moore_determining_2011,ugarte-urra_investigation_2006,viall_patterns_2011,viall_evidence_2012}. More recent work \citep{del_zanna_evolution_2015,bradshaw_patterns_2016} suggests that observations of a single \AR{} may be consistent with both steady and impulsive heating, depending on the location within the \AR{}. Collectively, these results suggest that \AR s are heated by a range of frequencies.

Two often-used diagnostics of the frequency of energy deposition in the coronal plasma are the emission measure slope and the timelag. The emission measure distribution, $\mathrm{EM}(T)=\int\mathrm{d}h\,n_e^2$, where $n_e$ is the electron density and the integration is taken along the line of sight, is well-described by the power-law relationship $\textup{EM}(T)\sim T^a$, for $a>0$, over the temperature range $10^{5.5}\lesssim T\lesssim10^{6.5}$ K \citep{jordan_structure_1975,jordan_structure_1976}. $a$, the emission measure slope, parameterizes the width of the emission measure distribution and is a commonly used diagnostic for the heating frequency \citep[e.g.][]{tripathi_emission_2011,winebarger_using_2011,warren_constraints_2011,mulu-moore_can_2011,bradshaw_diagnosing_2012,schmelz_cold_2012,reep_diagnosing_2013,del_zanna_evolution_2015}. The timelag analysis of \citet{viall_evidence_2012} provides an additional diagnostic of the heating frequency. \citet{viall_patterns_2011} showed that, as the plasma cools, the intensity will peak in successively cooler passbands of the Atmospheric Imaging Assembly \citep[AIA,][]{lemen_atmospheric_2012} on the Solar Dynamics Observatory \citep[SDO,][]{pesnell_solar_2012} spacecraft. The temporal offset which maximizes the cross-correlation between these intensities is a proxy for the cooling time of the plasma between these channels. Provided the ``hot'' channel precedes the ``cool'' channel, cooling plasma produces a positive timelag.

Any viable heating model must account for the range of observed emission measure slopes and timelags \citep{viall_survey_2017}. However, accurately predicting the distributions of these observables for a given heating model is challenging as several factors are likely to impact these diagnostics, including multiple emitting structures along the LOS and non-equilibrium ionization \citep[e.g.][]{barnes_inference_2016}.

In \citet[\citetalias{barnes_understanding_2019} hereafter]{barnes_understanding_2019}, we forward modeled emission from \AR{} NOAA 1158 as observed by the six EUV channels of AIA. Using a potential field extrapolation combined with $5\times10^3$ separate instances of the Enthalpy-based Thermal Evolution of Loops model \citep[EBTEL,][]{klimchuk_highly_2008,cargill_enthalpy-based_2012,cargill_enthalpy-based_2012-1,barnes_inference_2016}, we predicted time-dependent intensities in each pixel of the \AR{} for a range of nanoflare heating frequencies. We defined the heating frequency in terms of the dimensionless ratio 
\begin{equation}\label{eq:heating_types}
    \varepsilon = \frac{\langle\twait\rangle}{\tau_{\textup{cool}}}
    \begin{cases} 
        < 1, &  \text{high frequency},\\
        \sim1, & \text{intermediate frequency}, \\
        > 1, & \text{low frequency},
     \end{cases}
\end{equation}
where $\tau_{\textup{cool}}$ is the fundamental cooling timescale due to thermal conduction and radiation \citep[see appendix of][]{cargill_active_2014} and $\langle \twait\rangle$ is the average waiting time between consecutive heating events on a given strand. As in \citetalias{barnes_understanding_2019}, we define a \textit{strand} to be a flux tube with the largest possible isothermal cross-section and the fundamental unit of the corona while a \textit{loop} is an intensity enhancement relative to the background diffuse emission and an observationally-defined feature.

From our predicted intensities, we computed the emission measure slope as well as the timelag and the maximum cross-correlation for all 15 AIA channel pairs. We found that signatures of the heating frequency persist in both the emission measure slope and the timelag and that, in particular, negative timelags where the ``cool'' channel is 131 \AA{}, provide a possible diagnostic for $\ge10$ MK plasma.

While such predicted diagnostics are useful in understanding how observables respond to the frequency of energy deposition, systematically assessing real observations in terms of said model results is nontrivial. Attempts to tune model parameters to exactly match a single observation (e.g. a lightcurve from a single pixel) are not likely to generalize well to other data (``overfitting''). Additionally, purely qualitative comparisons between real data and forward models provide no constraint on the observation with respect to the model inputs, regardless of how sophisticated the simulation may be.

Because of the ability to learn non-linear relationships from arbitrary data, machine learning  is an excellent tool for systematically comparing observations and simulations for a range of input parameters. Machine learning has a variety of applications in solar physics, from predicting coronal mass ejections \citep[e.g.][]{bobra_predicting_2016} to deconvolving magnetograms \citep{baso_enhancing_2018}. In particular, \citet{tajfirouze_time-resolved_2016} trained a probabilistic neural network (PNN) on  $>10^5$ modeled 94 \AA{} and 335 \AA{} AIA light curves simulated using EBTEL for a large parameter space of heating properties. They found that a sample of observed light curves were most consistent with many frequent events drawn from a power-law distribution with index $\alpha=-1.5$ though the overall agreement between the best fit and the observation was poor. Combined with predicted diagnostics from sophisticated forward models, systematic comparisions with machine learning methods are well-poised to place strong constraints on heating properties in \AR s.

In this paper, the second in a series concerned with constraining nanoflare heating properties, we train a random forest classification model to classify the heating frequency in each pixel of \AR{} NOAA 1158 using the predicted emission measure slopes, timelags, and maximum cross-correlations from \citetalias{barnes_understanding_2019}. In \autoref{sec:observations}, we describe how the full 12 hours of multi-wavelength AIA observations were processed and how we computed the emission measure slope (\autoref{sec:em_slopes}) and timelag (\autoref{sec:timelags}). \autoref{sec:compare} describes the random forest classification model as well as the data preparation procedure (\autoref{sec:data-prep}) and \autoref{sec:feature-combos} and \ref{sec:feature-importance} show the predicted heating frequency in each pixel for several different combinations of features. In \autoref{sec:discussion} we discuss the results of our classification model and provide some concluding comments in \autoref{sec:conclusions}. To our knowledge, this paper represents the first attempt to use multiple diagnostics and machine learning to map the heating properties across an observed \AR{}.