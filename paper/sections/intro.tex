%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   Introduction                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}\label{sec:introduction}

A central problem in the study of the solar corona is whether EUV and soft X-ray observations of \AR s are consistent with the plasma being heated steadily or impulsively.
Observations of hot plasma by the X-Ray Telescope \citep[XRT,][]{golub_x-ray_2007} on the \textit{Hinode} spacecraft \citep{kosugi_hinode_2007} suggest \AR{} cores are heated steadily \citep[e.g.][]{warren_constraints_2011,winebarger_using_2011}.
Alternatively, observations of cooler ($\sim1$ MK) plasma have been shown to be more consistent with impulsive heating where the plasma is allowed to cool significantly between consecutive heating events \citep[e.g][]{winebarger_evolving_2003,mulu-moore_determining_2011,ugarte-urra_investigation_2006,viall_patterns_2011,viall_evidence_2012}.
More recent work \citep{del_zanna_evolution_2015,bradshaw_patterns_2016} suggests that observations of a single \AR{} may be consistent with both steady and impulsive heating, depending on the location within the \AR{}.
Additionally, a given flux tube at a single location in an \AR{} core may undergo a range of heating frequencies \citep[e.g.][]{cargill_active_2014}.
Collectively, these results suggest that \AR s may be heated by a range of frequencies.
Here, we define the heating frequency in terms of the time between consecutive heating events on a given flux tube.

Two often-used diagnostics of the frequency of energy deposition in the coronal plasma are the ``cool'' emission measure slope and the time lag, the temporal offset which maximizes the cross-correlation between pairs of imaging channels.
The emission measure distribution, $\mathrm{EM}(T)=\int\mathrm{d}h\,n_e^2$, where $n_e$ is the electron density and the integration is taken along the line of sight (LOS), is well-described by the power-law relationship $\textup{EM}(T)\sim T^a$, for $a>0$, over the temperature range $10^{5.5}\lesssim T\lesssim10^{6.5}$ K \citep{jordan_structure_1975,jordan_structure_1976}.
$a$, the emission measure slope in $\log-\log$ space, parameterizes the width of the emission measure distribution and is a commonly used diagnostic for the heating frequency \citep[e.g.][]{tripathi_emission_2011,winebarger_using_2011,warren_constraints_2011,mulu-moore_can_2011,bradshaw_diagnosing_2012,schmelz_cold_2012,reep_diagnosing_2013,del_zanna_evolution_2015}.

The time lag analysis of \citet{viall_evidence_2012} provides an additional diagnostic of the heating frequency. \citet{viall_patterns_2011} showed that, as the plasma cools, the intensity will peak in successively cooler passbands of the Atmospheric Imaging Assembly \citep[AIA,][]{lemen_atmospheric_2012} on the Solar Dynamics Observatory \citep[SDO,][]{pesnell_solar_2012} spacecraft.
The temporal offset which maximizes the cross-correlation between these intensities is a proxy for the cooling time of the plasma between these channels.
The general convention is that the ``hot'' channel precedes the ``cool'' channel.
In this case, cooling plasma produces a positive time lag while a negative time lag indicates heating.
However, the multiple temperature peaks in the AIA response functions creates a nuance to this general rule.
The 94 and 131 \AA{} channels are doubly peaked in the range of temperatures over which an impulsive heating event may span (see \autoref{fig:aia-response}).
Not knowing \textit{a priori} what physics occurs where, we follow the convention set by \citet{viall_evidence_2012}, where 94 \AA{} is always assumed to be a hot channel, and $8$ MK plasma dominates the emission, and 131 \AA{} is always assumed to be a cool channel where $0.5$ MK plasma dominates the emission.
When these assumptions do not hold, opposite time lag conventions result.
We remove this ambiguity with the other four AIA channels, since they span the temperatures in between. 

Any viable heating model must account for the range of observed emission measure slopes and time lags \citep[\citetalias{viall_survey_2017} hereafter]{viall_survey_2017}.
However, accurately predicting the distributions of these observables for a given heating model is challenging as several factors are likely to impact these diagnostics, including multiple emitting structures along the LOS and non-equilibrium ionization \citep[e.g.][]{barnes_inference_2016}.

In \citet[\citetalias{barnes_understanding_2019} hereafter]{barnes_understanding_2019}, we forward modeled emission from \AR{} NOAA 1158 as observed by the six EUV channels of AIA.
Using a potential field extrapolation combined with $5\times10^3$ separate instances of the Enthalpy-based Thermal Evolution of Loops model \citep[EBTEL,][]{klimchuk_highly_2008,cargill_enthalpy-based_2012,cargill_enthalpy-based_2012-1,barnes_inference_2016}, we predicted time-dependent intensities in each pixel of the \AR{} for a range of nanoflare heating frequencies.
We defined the heating frequency in terms of the dimensionless ratio 
\begin{equation}\label{eq:heating_types}
    \varepsilon = \frac{\langle\twait\rangle}{\tau_{\textup{cool}}} =
    \begin{cases} 
        0.1, &  \text{high frequency},\\
        1, & \text{intermediate frequency}, \\
        5, & \text{low frequency},
     \end{cases}
\end{equation}
where $\tau_{\textup{cool}}$ is the fundamental cooling timescale due to thermal conduction and radiation \citep[see appendix of][]{cargill_active_2014} and $\langle \twait\rangle$ is the average waiting time between consecutive heating events on a given strand.
Specifically, for the shortest loop in our simulated \AR{}, $\approx20$ Mm, the high-, intermediate-, and low-frequency values of $\langle\twait\rangle$ are approximately $90$ s, $930$ s, and $4700$ s, respectively.
For the longest loop, $\approx245$ Mm, the approximate values of $\langle\twait\rangle$ for the three frequencies are $850$ s, $8500$ s, and $42500$ s.

As in \citetalias{barnes_understanding_2019}, we define a \textit{strand} to be a flux tube with the largest possible isothermal cross-section and the fundamental unit of the corona while a \textit{loop} is an observationally-defined feature and an intensity enhancement relative to the surrounding diffuse emission.
Additionally, for each simulated strand, even within a single heating frequency category, there is a spread in the distribution of heating frequencies due to our chosen dependence of the waiting time on the energy of the event.
This parameterization of the heating is discussed in detail in Section 2.3 of \citetalias{barnes_understanding_2019}.

From our predicted intensities, we computed the emission measure slope as well as the time lag and the maximum cross-correlation for all 15 AIA channel pairs.
We found that signatures of the heating frequency persist in both the emission measure slope and the time lag and that, in particular, negative time lags that occur in pairs with the 131 \AA{} channel provide a possible diagnostic for $\ge10$ MK plasma, provided they are co-spatial with positive time lags in the other channel pairs.

While such predicted diagnostics are useful in understanding how observables respond to the frequency of energy deposition, systematically assessing real observations in terms of said model results is nontrivial.
Attempts to tune model parameters to exactly match a single observation (e.g. a light curve from a single pixel) are not likely to generalize well to other data (i.e. ``overfitting'').
Additionally, purely qualitative comparisons between real data and forward models provide no constraint on the observation with respect to the model inputs, regardless of how sophisticated the simulation may be.

Because of the ability to learn non-linear relationships from arbitrary data, machine learning  is an excellent tool for systematically and quantitatively assessing differences between observations and simulations for a range of input parameters.
Machine learning has a variety and growing number of applications in solar physics, including predicting coronal mass ejections \citep[e.g.][]{bobra_predicting_2016}, classifying flare spectra \citep{panos_identifying_2018}, and inverting optically-thick chromospheric lines \citep{osborne_radynversion_2019}.
In particular, \citet{tajfirouze_time-resolved_2016} trained a neural network on $>10^5$ modeled 94 \AA{} and 335 \AA{} AIA light curves simulated using EBTEL for a large parameter space of heating properties.
Using this trained network, they classified a sample of $\sim4000$ s light curves, extracted from \AR s thought to contain ``very hot'' ($\ge6$ MK) plasma, in terms of the model heating input parameters.
They found that these observations were most consistent with many frequent short-duration events drawn from a power-law distribution with index $\alpha=-1.5$.
Combined with predicted observables from sophisticated forward models, systematic comparisons using machine learning methods are well-poised to place strong constraints on heating properties in \AR s.

In this paper, the second in a series concerned with constraining nanoflare heating properties, we train a machine learning classification model, specifically a random forest classifier, to identify the most probable heating frequency in each pixel of \AR{} NOAA 1158 using the predicted emission measure slopes and peak temperatures, time lags, and maximum cross-correlations from \citetalias{barnes_understanding_2019}.
In \autoref{sec:observations}, we describe how the full 12 hours of multi-wavelength AIA observations are processed and how we compute the slope and peak temperature of the emission measure distribution (\autoref{sec:em_slopes}) and time lag and maximum cross-correlation between AIA channels (\autoref{sec:timelags}).
\autoref{sec:compare} describes the random forest classification model as well as the data preparation procedure (\autoref{sec:data-prep}) and \autoref{sec:feature-combos} and \autoref{sec:feature-importance} show the predicted heating frequency in each pixel for several different combinations of features.
In \autoref{sec:discussion} we discuss the results of our classification model and provide some concluding comments in \autoref{sec:conclusions}.
To our knowledge, this paper represents the first attempt to use multiple diagnostics and machine learning to map the heating properties across an observed \AR{}.